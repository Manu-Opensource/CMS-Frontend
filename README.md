Do not look at components/documentEditor if you wish to preserve your sanity, it is the worst code seen to man kind, but it works.
